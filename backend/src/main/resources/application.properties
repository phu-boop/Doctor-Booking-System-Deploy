spring.application.name=backend

# MySQL Database Configuration
# N?u khng c DB_URL trong environment, s? dng gi tr? default n? y
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}

# HikariCP Connection Pool Configuration
# Gi?m maxLifetime ?? trnh l?i "No operations allowed after connection closed"
spring.datasource.hikari.max-lifetime=600000
# Connection timeout (30 giy)
spring.datasource.hikari.connection-timeout=30000
# Validation timeout (5 giy)
spring.datasource.hikari.validation-timeout=5000
# Minimum idle connections
spring.datasource.hikari.minimum-idle=5
# Maximum pool size
spring.datasource.hikari.maximum-pool-size=20
# Connection test query
spring.datasource.hikari.connection-test-query=SELECT 1
# Leak detection threshold (10 pht)
spring.datasource.hikari.leak-detection-threshold=600000

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# JWT Configuration
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION}
jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION}

# Server Configuration
server.port=7070

# Logging Configuration
logging.level.com.doctorbooking.backend.config.JwtAuthenticationFilter=INFO
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.web.FilterChainProxy=DEBUG
logging.level.org.springframework.security.web.access.intercept.AuthorizationFilter=DEBUG

# Google Gemini AI Configuration
google.ai.api-key=${GOOGLE_AI_API_KEY}

# VNPAY Configuration
vnpay.tmnCode=${VNPAY_TMN_CODE}
vnpay.hashSecret=${VNPAY_HASH_SECRET}
vnpay.url=${VNPAY_URL}
vnpay.returnUrl=${VNPAY_RETURN_URL}
vnpay.appointmentReturnUrl=${VNPAY_APPOINTMENT_RETURN_URL}

# Email Configuration (SMTP)
spring.mail.host=${SMTP_HOST:smtp.gmail.com}
spring.mail.port=${SMTP_PORT:587}
spring.mail.username=${SMTP_USERNAME}
spring.mail.password=${SMTP_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000
# Email sender name
app.email.from=${EMAIL_FROM:Doctor Booking System <dangtrong2608@gmail.com>}

# App Configuration
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:5173,http://localhost:3000}
app.frontend.url=${FRONTEND_URL:http://localhost:5173}